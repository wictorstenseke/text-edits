# Internationalization (i18n)

This application supports multiple languages using [i18next](https://www.i18next.com/) and [react-i18next](https://react.i18next.com/).

## Supported Languages

- **English (en)** - Default language
- **Swedish (sv)**

## Usage

### Switching Languages

Users can toggle between English and Swedish using the language switcher button in the header (globe icon with "A" character).

The selected language preference is automatically saved to `localStorage` and will persist across browser sessions.

### Language Storage

The current language selection is stored in `localStorage` under the key `language`.

## Architecture

### Translation Files

Translation files are located in `src/locales/{language}/translation.json`:

- `src/locales/en/translation.json` - English translations
- `src/locales/sv/translation.json` - Swedish translations

### Translation Keys Structure

Translations are organized by component/feature:

```json
{
  "header": { ... },
  "dialogs": { ... },
  "sections": { ... },
  "manageSections": { ... },
  "tags": { ... },
  "editor": { ... }
}
```

### Configuration

The i18n configuration is in `src/lib/i18n.ts`:

- Initializes i18next with react-i18next
- Loads translation resources
- Sets the default language to English
- Loads saved language preference from localStorage

## Adding a New Language

To add support for a new language:

1. **Create translation file**: Add a new translation file at `src/locales/{language-code}/translation.json`
2. **Copy and translate**: Copy the structure from `src/locales/en/translation.json` and translate all strings
3. **Update i18n config**: Add the new language to the `resources` object in `src/lib/i18n.ts`
4. **Update language toggle**: If you want to support more than 2 languages, modify `src/components/language-toggle.tsx` to show a dropdown instead of a toggle

Example for adding German (de):

```typescript
// src/lib/i18n.ts
import deTranslation from "@/locales/de/translation.json";

const resources = {
  en: { translation: enTranslation },
  sv: { translation: svTranslation },
  de: { translation: deTranslation }, // Add new language
};
```

## Using Translations in Components

### Import the hook

```typescript
import { useTranslation } from "react-i18next";
```

### Use in component

```typescript
export const MyComponent = () => {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t("header.title")}</h1>
      <button>{t("dialogs.addSection.add")}</button>
    </div>
  );
};
```

## Translation Best Practices

1. **Keep keys descriptive**: Use semantic keys like `header.resetDocument` instead of generic keys like `button1`
2. **Group by feature**: Organize translations by component or feature for easier maintenance
3. **Be consistent**: Use the same translation key structure across all language files
4. **Avoid hardcoded strings**: Always use the translation function `t()` for user-facing text
5. **Test all languages**: Verify that all strings are properly translated and the UI renders correctly in all supported languages

## Technical Details

- **Library**: i18next v23.x + react-i18next v14.x
- **Storage**: localStorage (key: `language`)
- **Default language**: English (en)
- **Fallback language**: English (en)
- **Interpolation**: Disabled escaping (HTML content allowed)

## Related Files

- `src/lib/i18n.ts` - i18n configuration
- `src/locales/*/translation.json` - Translation files
- `src/components/language-toggle.tsx` - Language switcher component
- `src/main.tsx` - i18n initialization
